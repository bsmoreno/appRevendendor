import{r as o,h as $,i as k,c$ as C,d0 as F,al as L,x as D,an as A,d1 as G,j as r,S as i,B as H,R as h,p as x,c_ as U,ao as g,as as b,at as w,au as y,av as v,cV as q,a as N,ax as V,H as T,c as _}from"./index-BmfGJE-Y.js";import{z as d,t as J}from"./index-jjTw8nlg.js";import{G as K,S as M}from"./split-layout-BsmddvzM.js";var Q=Object.defineProperty,W=Object.defineProperties,X=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,O=(t,e,s)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ee=(t,e)=>{for(var s in e||(e={}))Y.call(e,s)&&O(t,s,e[s]);if(S)for(var s of S(e))Z.call(e,s)&&O(t,s,e[s]);return t},re=(t,e)=>W(t,X(e));const I=o.forwardRef((t,e)=>$.createElement(k,re(ee({ref:e},t),{weights:C})));I.displayName="Eye";var se=Object.defineProperty,te=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,E=(t,e,s)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ie=(t,e)=>{for(var s in e||(e={}))oe.call(e,s)&&E(t,s,e[s]);if(P)for(var s of P(e))ne.call(e,s)&&E(t,s,e[s]);return t},le=(t,e)=>te(t,ae(e));const B=o.forwardRef((t,e)=>$.createElement(k,le(ie({ref:e},t),{weights:F})));B.displayName="EyeSlash";const ce=d.object({email:d.string().min(1,{message:"Email is required"}).email(),password:d.string().min(1,{message:"Password is required"})}),de={email:"",password:""};function pe(){const[t,e]=L(),{checkSession:s}=D(),[p,m]=o.useState(),[l,c]=o.useState(!1),{control:u,handleSubmit:R,setError:f,formState:{errors:a}}=A({defaultValues:de,resolver:J(ce)});o.useEffect(()=>{e(l)},[l]);const z=o.useCallback(async n=>{c(!0);const{error:j}=await G.singIn(n);if(j){debugger;f("root",{type:"server",message:j}),c(!1);return}await(s==null?void 0:s()),c(!1)},[s,f]);return r.jsxs(i,{spacing:4,children:[r.jsx("div",{children:r.jsx(H,{component:h,href:x.home,sx:{display:"inline-block",fontSize:0},children:r.jsx(U,{colorDark:"light",colorLight:"dark",height:32,width:122})})}),r.jsx(i,{spacing:3,children:r.jsxs(i,{spacing:2,children:[r.jsx("form",{onSubmit:R(z),children:r.jsxs(i,{spacing:2,children:[r.jsx(g,{control:u,name:"email",render:({field:n})=>r.jsxs(b,{error:!!a.email,children:[r.jsx(w,{children:"Email address"}),r.jsx(y,{...n,type:"email"}),a.email?r.jsx(v,{children:a.email.message}):null]})}),r.jsx(g,{control:u,name:"password",render:({field:n})=>r.jsxs(b,{error:!!a.password,children:[r.jsx(w,{children:"Password"}),r.jsx(y,{...n,endAdornment:p?r.jsx(I,{cursor:"pointer",fontSize:"var(--icon-fontSize-md)",onClick:()=>{m(!1)}}):r.jsx(B,{cursor:"pointer",fontSize:"var(--icon-fontSize-md)",onClick:()=>{m(!0)}}),label:"Password",type:p?"text":"password"}),a.password?r.jsx(v,{children:a.password.message}):null]})}),a.root?r.jsx(q,{color:"error",children:a.root.message}):null,r.jsx(N,{disabled:l,type:"submit",variant:"contained",children:"Sign in"})]})}),r.jsx("div",{children:r.jsx(V,{component:h,href:x.auth.resetPassword,variant:"subtitle2",children:"Forgot password?"})})]})})]})}const me={title:`Sign in | Auth | ${_.site.name}`};function he(){return r.jsxs(o.Fragment,{children:[r.jsx(T,{children:r.jsx("title",{children:me.title})}),r.jsx(K,{children:r.jsx(M,{children:r.jsx(pe,{})})})]})}export{he as Page};
