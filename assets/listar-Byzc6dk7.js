import{g as Ve,b as we,s as ae,_ as Z,r as i,u as re,d as se,j as e,e as ne,f as oe,T as v,h as s,i as R,P as ie,k as He,l as Ce,m as Ae,I as Se,w as Me,D as w,L as O,n as C,o as A,q as N,a as j,t as H,v as Ee,x as Pe,y as Ze,z as Ue,A as Oe,S as u,R as le,p as ce,E as M,F as Fe,G as de,J as ue,K as pe,U,M as $,B as V,N as me,C as I,O as T,Q as k,V as De,W as F,X as L,Y as Re,Z as E,$ as P,a0 as z,H as $e,a1 as Ie,a2 as Te,c as ke}from"./index-BmfGJE-Y.js";import{P as _e}from"./react-number-format.es-BDYcYGAq.js";import{u as D}from"./usuario-state-CTeTsZho.js";import{D as Ne,g as Le,a as ze,b as Be}from"./DialogContent-B52oVSVn.js";import{C as We,w as qe,P as Ye,D as Ke,F as Ge,H as Qe,a as B,b as Xe,S as Je,c as y,R as et}from"./dx.material.blue.dark.compact-BxJV-vKz.js";function tt(t){return Ve("MuiDialogActions",t)}we("MuiDialogActions",["root","spacing"]);const at=["className","disableSpacing"],rt=t=>{const{classes:a,disableSpacing:r}=t;return oe({root:["root",!r&&"spacing"]},tt,a)},st=ae("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:r}=t;return[a.root,!r.disableSpacing&&a.spacing]}})(({ownerState:t})=>Z({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),nt=i.forwardRef(function(a,r){const c=re({props:a,name:"MuiDialogActions"}),{className:p,disableSpacing:m=!1}=c,d=se(c,at),g=Z({},c,{disableSpacing:m}),n=rt(g);return e.jsx(st,Z({className:ne(n.root,p),ownerState:g,ref:r},d))}),ot=["className","id"],it=t=>{const{classes:a}=t;return oe({root:["root"]},Le,a)},lt=ae(v,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,a)=>a.root})({padding:"16px 24px",flex:"0 0 auto"}),ct=i.forwardRef(function(a,r){const c=re({props:a,name:"MuiDialogTitle"}),{className:p,id:m}=c,d=se(c,ot),g=c,n=it(g),{titleId:o=m}=i.useContext(Ne);return e.jsx(lt,Z({component:"h2",className:ne(n.root,p),ownerState:g,ref:r,variant:"h6",id:m??o},d))}),he=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,28H188V24a12,12,0,0,0-24,0v4H92V24a12,12,0,0,0-24,0v4H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V48A20,20,0,0,0,208,28ZM68,52a12,12,0,0,0,24,0h72a12,12,0,0,0,24,0h16V76H52V52ZM52,204V100H204V204Zm60-80v56a12,12,0,0,1-24,0V143.32a12,12,0,0,1-9.37-22l16-8A12,12,0,0,1,112,124Zm61.49,33.88L163.9,168H168a12,12,0,0,1,0,24H136a12,12,0,0,1-8.71-20.25L155.45,142a4,4,0,0,0,.55-2,4,4,0,0,0-7.47-2,12,12,0,0,1-20.78-12A28,28,0,0,1,180,140a27.77,27.77,0,0,1-5.64,16.86A10.63,10.63,0,0,1,173.49,157.88Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,48V88H40V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),s.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm59.16,30.45L152,176h16a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136,23.76,23.76,0,0,1,171.16,150.45Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM112,184a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm56-8a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136a23.76,23.76,0,0,1-4.84,14.45L152,176ZM48,80V48H72v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,34H182V24a6,6,0,0,0-12,0V34H86V24a6,6,0,0,0-12,0V34H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V48A14,14,0,0,0,208,34ZM48,46H74V56a6,6,0,0,0,12,0V46h84V56a6,6,0,0,0,12,0V46h26a2,2,0,0,1,2,2V82H46V48A2,2,0,0,1,48,46ZM208,210H48a2,2,0,0,1-2-2V94H210V208A2,2,0,0,1,208,210Zm-98-90v64a6,6,0,0,1-12,0V129.71l-7.32,3.66a6,6,0,1,1-5.36-10.74l16-8A6,6,0,0,1,110,120Zm59.57,29.25L148,178h20a6,6,0,0,1,0,12H136a6,6,0,0,1-4.8-9.6L160,142a10,10,0,1,0-16.65-11A6,6,0,1,1,133,125a22,22,0,1,1,36.62,24.26Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Zm-96-88v64a8,8,0,0,1-16,0V132.94l-4.42,2.22a8,8,0,0,1-7.16-14.32l16-8A8,8,0,0,1,112,120Zm59.16,30.45L152,176h16a8,8,0,0,1,0,16H136a8,8,0,0,1-6.4-12.8l28.78-38.37A8,8,0,1,0,145.07,132a8,8,0,1,1-13.85-8A24,24,0,0,1,176,136,23.76,23.76,0,0,1,171.16,150.45Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M208,36H180V24a4,4,0,0,0-8,0V36H84V24a4,4,0,0,0-8,0V36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V48A12,12,0,0,0,208,36ZM48,44H76V56a4,4,0,0,0,8,0V44h88V56a4,4,0,0,0,8,0V44h28a4,4,0,0,1,4,4V84H44V48A4,4,0,0,1,48,44ZM208,212H48a4,4,0,0,1-4-4V92H212V208A4,4,0,0,1,208,212ZM108,120v64a4,4,0,0,1-8,0V126.47l-10.21,5.11a4,4,0,0,1-3.58-7.16l16-8A4,4,0,0,1,108,120Zm60,28-24,32h24a4,4,0,0,1,0,8H136a4,4,0,0,1-3.2-6.4l28.78-38.37A11.88,11.88,0,0,0,164,136a12,12,0,0,0-22.4-6,4,4,0,0,1-6.92-4A20,20,0,0,1,172,136,19.79,19.79,0,0,1,168,148Z"}))]]);var dt=Object.defineProperty,ut=Object.defineProperties,pt=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,q=(t,a,r)=>a in t?dt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,xt=(t,a)=>{for(var r in a||(a={}))mt.call(a,r)&&q(t,r,a[r]);if(W)for(var r of W(a))ht.call(a,r)&&q(t,r,a[r]);return t},gt=(t,a)=>ut(t,pt(a));const xe=i.forwardRef((t,a)=>s.createElement(R,gt(xt({ref:a},t),{weights:he})));xe.displayName="Calendar";const ft=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,28H88A12,12,0,0,0,76,40V76H40A12,12,0,0,0,28,88V216a12,12,0,0,0,12,12H168a12,12,0,0,0,12-12V180h36a12,12,0,0,0,12-12V40A12,12,0,0,0,216,28ZM156,204H52V100H156Zm48-48H180V88a12,12,0,0,0-12-12H100V52H204Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,40V168H168V88H88V40Z",opacity:"0.2"}),s.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32Zm-8,128H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,34H88a6,6,0,0,0-6,6V82H40a6,6,0,0,0-6,6V216a6,6,0,0,0,6,6H168a6,6,0,0,0,6-6V174h42a6,6,0,0,0,6-6V40A6,6,0,0,0,216,34ZM162,210H46V94H162Zm48-48H174V88a6,6,0,0,0-6-6H94V46H210Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,36H88a4,4,0,0,0-4,4V84H40a4,4,0,0,0-4,4V216a4,4,0,0,0,4,4H168a4,4,0,0,0,4-4V172h44a4,4,0,0,0,4-4V40A4,4,0,0,0,216,36ZM164,212H44V92H164Zm48-48H172V88a4,4,0,0,0-4-4H92V44H212Z"}))]]);var jt=Object.defineProperty,vt=Object.defineProperties,yt=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,K=(t,a,r)=>a in t?jt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,wt=(t,a)=>{for(var r in a||(a={}))bt.call(a,r)&&K(t,r,a[r]);if(Y)for(var r of Y(a))Vt.call(a,r)&&K(t,r,a[r]);return t},Ht=(t,a)=>vt(t,yt(a));const ge=i.forwardRef((t,a)=>s.createElement(R,Ht(wt({ref:a},t),{weights:ft})));ge.displayName="Copy";const fe=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M256,136a12,12,0,0,1-12,12H204a12,12,0,0,1,0-24h40A12,12,0,0,1,256,136Zm-54.81,56.28a12,12,0,1,1-18.38,15.44C169.12,191.42,145,172,108,172c-28.89,0-55.46,12.68-74.81,35.72a12,12,0,0,1-18.38-15.44A124.08,124.08,0,0,1,63.5,156.53a72,72,0,1,1,89,0A124,124,0,0,1,201.19,192.28ZM108,148a48,48,0,1,0-48-48A48.05,48.05,0,0,0,108,148Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M168,100a60,60,0,1,1-60-60A60,60,0,0,1,168,100Z",opacity:"0.2"}),s.createElement("path",{d:"M256,136a8,8,0,0,1-8,8H200a8,8,0,0,1,0-16h48A8,8,0,0,1,256,136Zm-57.87,58.85a8,8,0,0,1-12.26,10.3C165.75,181.19,138.09,168,108,168s-57.75,13.19-77.87,37.15a8,8,0,0,1-12.25-10.3c14.94-17.78,33.52-30.41,54.17-37.17a68,68,0,1,1,71.9,0C164.6,164.44,183.18,177.07,198.13,194.85ZM108,152a52,52,0,1,0-52-52A52.06,52.06,0,0,0,108,152Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M198.13,194.85A8,8,0,0,1,192,208H24a8,8,0,0,1-6.12-13.15c14.94-17.78,33.52-30.41,54.17-37.17a68,68,0,1,1,71.9,0C164.6,164.44,183.18,177.07,198.13,194.85ZM248,128H200a8,8,0,0,0,0,16h48a8,8,0,0,0,0-16Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M254,136a6,6,0,0,1-6,6H200a6,6,0,0,1,0-12h48A6,6,0,0,1,254,136Zm-57.41,60.14a6,6,0,1,1-9.18,7.72C166.9,179.45,138.69,166,108,166s-58.89,13.45-79.41,37.86a6,6,0,0,1-9.18-7.72C35.14,177.41,55,164.48,77,158.26a66,66,0,1,1,62,0C161,164.48,180.86,177.41,196.59,196.14ZM108,154a54,54,0,1,0-54-54A54.06,54.06,0,0,0,108,154Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M256,136a8,8,0,0,1-8,8H200a8,8,0,0,1,0-16h48A8,8,0,0,1,256,136Zm-57.87,58.85a8,8,0,0,1-12.26,10.3C165.75,181.19,138.09,168,108,168s-57.75,13.19-77.87,37.15a8,8,0,0,1-12.25-10.3c14.94-17.78,33.52-30.41,54.17-37.17a68,68,0,1,1,71.9,0C164.6,164.44,183.18,177.07,198.13,194.85ZM108,152a52,52,0,1,0-52-52A52.06,52.06,0,0,0,108,152Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M252,136a4,4,0,0,1-4,4H200a4,4,0,0,1,0-8h48A4,4,0,0,1,252,136Zm-56.94,61.43a4,4,0,0,1-6.12,5.14C168,177.7,139.3,164,108,164s-60,13.7-80.94,38.57a4,4,0,1,1-6.12-5.14c16.71-19.9,38.13-33.13,61.89-38.59a64,64,0,1,1,50.34,0C156.93,164.3,178.35,177.53,195.06,197.43ZM108,156a56,56,0,1,0-56-56A56.06,56.06,0,0,0,108,156Z"}))]]);var Ct=Object.defineProperty,At=Object.defineProperties,St=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,Q=(t,a,r)=>a in t?Ct(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,Pt=(t,a)=>{for(var r in a||(a={}))Mt.call(a,r)&&Q(t,r,a[r]);if(G)for(var r of G(a))Et.call(a,r)&&Q(t,r,a[r]);return t},Zt=(t,a)=>At(t,St(a));const je=i.forwardRef((t,a)=>s.createElement(R,Zt(Pt({ref:a},t),{weights:fe})));je.displayName="UserMinus";var Ut=Object.defineProperty,Ot=Object.defineProperties,Ft=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,Dt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,J=(t,a,r)=>a in t?Ut(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,$t=(t,a)=>{for(var r in a||(a={}))Dt.call(a,r)&&J(t,r,a[r]);if(X)for(var r of X(a))Rt.call(a,r)&&J(t,r,a[r]);return t},It=(t,a)=>Ot(t,Ft(a));const ve=i.forwardRef((t,a)=>s.createElement(ie,It($t({ref:a},t),{weights:he})));ve.displayName="Calendar";var Tt=Object.defineProperty,kt=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable,te=(t,a,r)=>a in t?Tt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,zt=(t,a)=>{for(var r in a||(a={}))Nt.call(a,r)&&te(t,r,a[r]);if(ee)for(var r of ee(a))Lt.call(a,r)&&te(t,r,a[r]);return t},Bt=(t,a)=>kt(t,_t(a));const ye=i.forwardRef((t,a)=>s.createElement(ie,Bt(zt({ref:a},t),{weights:fe})));ye.displayName="UserMinus";const Wt=i.forwardRef(function(a,r){return e.jsx(He,{direction:"up",ref:r,...a})});function qt({row:t,usuario:a}){const[r,c]=i.useState(a===void 0?!1:a);Ce(D);const p=Ae(D),m=()=>{c(!0)},d=()=>{c(!1),p()},g=o=>{let x=[];for(let f=0;f<Object.keys(o).length;f++)x.push(e.jsx(C,{disableGutters:!0,sx:{},children:e.jsx(A,{prefix:f.toString(),primary:`${(f+1).toString()} - ${Object.keys(o)[f].substring(1).replaceAll("/"," > ")} - ${n(o[Object.keys(o)[f]])}`})},f));return x},n=o=>{switch(o){case 0:return"LEITURA";case 1:return"GRAVAR";case 2:return"ATUALIZAR";case 3:return"EXCLUIR";case 4:return"ADMIN";default:return"ERRO"}};return e.jsxs(i.Fragment,{children:[t!==void 0&&a==null?e.jsx(Se,{onClick:m,children:e.jsx(Me,{})}):e.jsx(e.Fragment,{}),e.jsxs(ze,{open:r,TransitionComponent:Wt,keepMounted:!0,onClose:d,"aria-describedby":"alert-dialog-slide-description",title:"Tipos de Acesso",children:[e.jsx(ct,{children:t!==void 0&&a==null?"Níveis de Acesso":"Novo Usuário"}),e.jsx(w,{}),e.jsx(Be,{children:t!==void 0&&a==null?e.jsx(O,{sx:{width:"100%",bgcolor:"background.paper",textAlign:"center"},children:g(t.js_Roles)}):e.jsxs(O,{sx:{width:"100%",bgcolor:"background.paper",textAlign:"center"},children:[e.jsx(C,{disableGutters:!0,sx:{},children:e.jsx(A,{prefix:"",primary:`Novo Usuário: ${t==null?void 0:t.ds_Nome} - ${t==null?void 0:t.ds_Sobrenome}`})},N()),e.jsx(C,{disableGutters:!0,sx:{},children:e.jsx(A,{prefix:"",primary:`Senha: ${t==null?void 0:t.ds_Password}`})},N())]})}),e.jsx(w,{}),e.jsx(nt,{children:e.jsx(j,{onClick:d,children:"Sair"})})]})]})}const Yt=()=>({customDataSource:new We({key:"id_Usuario",load:async a=>{const r=await H.post("Usuarios/v1/Tabela",a);if(r.status===200)return r.data},byKey:async a=>(await H.get("Usuarios/v1/Buscar",{params:{id_Usuario:a}})).data})});function Kt({params:t,setModalRemover:a,setModalTrocarSenha:r,setModalLogs:c}){const p=Ee(),{getAccessLevel:m}=Pe(),[d,g]=i.useState(-1),n=t.data.id_Usuario;i.useEffect(()=>{async function l(){const b=await m(p);g(b)}l()},[p,m]);function o(l){l.preventDefault(),l.stopPropagation(),a(n)}function x(l){l.preventDefault(),l.stopPropagation(),console.log("Trocar Senha",n),r(n)}function f(l){l.preventDefault(),l.stopPropagation(),c(!0)}return t.data.js_Roles["*"]?e.jsx(e.Fragment,{}):e.jsxs(Ze,{children:[e.jsx(Ue,{children:e.jsx(j,{"aria-controls":"simple-menu","aria-haspopup":"true",children:e.jsx(qe,{})})}),e.jsx(Oe,{disableScrollLock:!0,PaperProps:{sx:{minWidth:"100px",p:1}},anchorOrigin:{horizontal:"left",vertical:"top"},transformOrigin:{horizontal:"right",vertical:"top"},children:e.jsxs(u,{direction:"column",alignItems:"flex-start",children:[e.jsxs(u,{width:"100%",children:[e.jsx(v,{children:"Ações"}),e.jsx(w,{})]}),e.jsx(u,{width:"100%",children:e.jsx(j,{component:le,href:ce.dashboard.cadastros.usuarios.editar(t.data.id_Usuario),startIcon:e.jsx(Ye,{}),sx:{justifyContent:"flex-start",textAlign:"left","& .MuiButton-startIcon":{marginRight:1},width:"100%"},children:" Editar"},M())}),e.jsx(u,{width:"100%",children:e.jsx(j,{onClick:o,hidden:d!==4,sx:{justifyContent:"flex-start",textAlign:"left","& .MuiButton-startIcon":{marginRight:1},width:"100%"},startIcon:e.jsx(ye,{}),children:" Remover"},M())}),e.jsx(u,{width:"100%",children:e.jsx(j,{onClick:f,hidden:t.data.js_Login.length==0,sx:{justifyContent:"flex-start",textAlign:"left","& .MuiButton-startIcon":{marginRight:1},width:"100%"},startIcon:e.jsx(ve,{}),children:" Logs de Acesso"},M())}),e.jsx(u,{width:"100%",children:e.jsx(j,{onClick:x,hidden:d!==4,sx:{justifyContent:"flex-start",textAlign:"left","& .MuiButton-startIcon":{marginRight:1},width:"100%"},startIcon:e.jsx(Fe,{}),children:" Gerar Nova Senha"},M())})]})})]})}const Gt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function Qt({idUsuario:t,setModalRemover:a,dataGrid:r}){const[c,p]=s.useState(!1),m=de(),{data:d,isLoading:g,error:n}=ue({queryKey:["Usuarios/v1/Buscar"],queryFn:async()=>{let l=await H.get("Usuarios/v1/Buscar",{params:{id_Usuario:t}});if(l.status===200)return l.data;throw new Error("Falha ao Carregar Usuário")},enabled:!!t&&c}),o=pe({mutationKey:["Usuarios/v1/Buscar"],mutationFn:async()=>{let l=await H.delete("/Usuarios/v1/Deletar",{params:{id_Usuario:t}});if(l.status===200){if(l.data)return l.data;throw new Error("Falha ao Deletar Usuário")}else throw new Error("Falha ao Deletar Usuário")}}),x=()=>{m.removeQueries({queryKey:["Usuarios/v1/Buscar"],exact:!0}),o.reset(),p(!1),a("")},f=async l=>{l.preventDefault(),await o.mutateAsync()};return i.useEffect(()=>{p(t!=="")},[t]),i.useEffect(()=>{var l,b;r&&o.isSuccess&&(x(),(b=(l=r==null?void 0:r.current)==null?void 0:l.instance)==null||b.refresh(),U.error("Usuário Removido com Sucesso!")),o.isError&&(U.error(o.error.message),o.reset())},[o]),e.jsx($,{open:c,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",hideBackdrop:!0,children:e.jsx(V,{sx:Gt,children:g||o.isPending?e.jsxs(u,{alignContent:"center",justifyContent:"center",justifyItems:"center",alignItems:"center",children:[e.jsx(me,{})," Carregando..."]}):n?e.jsx(v,{color:"text.secondary",variant:"body2",children:n.message}):e.jsx(I,{maxWidth:"sm",children:e.jsx(T,{sx:{border:"1px solid var(--mui-palette-divider)",boxShadow:"var(--mui-shadows-16)"},children:e.jsxs(u,{direction:"row",spacing:2,sx:{display:"flex",p:3},children:[e.jsx(k,{sx:{bgcolor:"var(--mui-palette-error-50)",color:"var(--mui-palette-error-main)"},children:e.jsx(De,{fontSize:"var(--Icon-fontSize)"})}),e.jsxs(u,{spacing:3,children:[e.jsxs(u,{spacing:1,children:[e.jsx(v,{variant:"h5",children:"Remover Usuário"}),e.jsx(v,{color:"text.secondary",variant:"body1",children:"Deseja Realmente Remover o Usuário:"}),e.jsxs(v,{color:"text.secondary",variant:"body1",fontWeight:"bold",children:[d==null?void 0:d.ds_Nome,"  ",d==null?void 0:d.ds_Sobrenome," - ",d==null?void 0:d.ds_Email]})]}),e.jsxs(u,{direction:"row",spacing:2,sx:{justifyContent:"flex-end"},children:[e.jsx(j,{color:"secondary",variant:"outlined",onClick:x,children:"Cancel"}),e.jsx(j,{color:"error",variant:"outlined",onClick:f,startIcon:e.jsx(je,{}),children:"Remover"})]})]})]})})})})})}const Xt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",p:4};function Jt({js_Login:t,modalLogs:a,setModalLogs:r}){var p;const c=()=>{r(!1)};return e.jsx($,{open:a,onClose:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsx(V,{sx:Xt,children:e.jsx(I,{maxWidth:"sm",children:e.jsx(T,{sx:{border:"1px solid var(--mui-palette-divider)",boxShadow:"var(--mui-shadows-16)"},children:e.jsxs(u,{direction:"row",spacing:2,sx:{display:"flex",p:3},children:[e.jsx(k,{sx:{bgcolor:"var(--mui-palette-primary-50)",color:"var(--mui-palette-primary-main)"},children:e.jsx(xe,{fontSize:"var(--Icon-fontSize)"})}),e.jsxs(u,{spacing:3,children:[e.jsxs(u,{spacing:1,width:"400px",children:[e.jsx(u,{spacing:1,children:e.jsx(v,{variant:"h5",children:"Ultimos Acesso"})}),e.jsx(u,{direction:"row",children:e.jsx(O,{sx:{minWidth:"100%",position:"relative",height:"300px",overflow:"auto"},children:t!=null&&t.length?(p=t==null?void 0:t.sort((m,d)=>new Date(d).getTime()-new Date(m).getTime()))==null?void 0:p.slice(0,10).map((m,d)=>e.jsxs(s.Fragment,{children:[e.jsx(C,{children:e.jsx(A,{primary:F(m).format("DD/MM/YYYY HH:mm:ss")})}),e.jsx(w,{variant:"fullWidth",component:"li"})]},d)):e.jsxs(s.Fragment,{children:[e.jsx(C,{children:e.jsx(A,{primary:"Usuário nunca acessou o sistema"})}),e.jsx(w,{variant:"fullWidth",component:"li"})]})})})]}),e.jsx(u,{direction:"row",spacing:1,sx:{justifyContent:"flex-end"},children:e.jsx(j,{color:"secondary",variant:"outlined",onClick:c,children:"Sair"})})]})]})})})})})}const ea={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ta({idUsuario:t,setModalTrocarSenha:a,dataGrid:r}){const[c,p]=s.useState(!1),m=de(),{data:d,isLoading:g,error:n}=ue({queryKey:["UsuariosV1TrocarSenha"],queryFn:async()=>{let h=await H.get("Usuarios/v1/Buscar",{params:{id_Usuario:t}});if(h.status===200)return h.data;throw new Error("Falha ao Carregar Usuário")},enabled:!!t&&c}),o=pe({mutationKey:["UsuariosV1TrocarSenha"],mutationFn:async()=>{let h=await H.put("/Usuarios/v1/AtualizarSenha",t);if(h.status===200){if(h.data)return h.data;throw new Error("Falha ao Atualizar Senha do Usuário")}else throw new Error("Falha ao Atualizar Senha do Usuário")}}),x=()=>{m.removeQueries({queryKey:["UsuariosV1TrocarSenha"],exact:!0}),o.reset(),p(!1),a("")},f=async h=>{h.preventDefault(),await o.mutateAsync()};i.useEffect(()=>{p(t!=="")},[t]),i.useEffect(()=>{},[o]);const l=async h=>{try{await navigator.clipboard.writeText(h),U.success("Senha copiada para o clipboard!")}catch(_){console.error("Falha ao copiar o texto: ",_),U.error("Falha ao copiar o texto para o clipboard.")}},b=h=>e.jsxs(u,{spacing:3,children:[e.jsxs(u,{spacing:1,children:[e.jsx(v,{variant:"h5",children:"Trocar Senha"}),e.jsx(v,{color:"text.secondary",variant:"body1",children:"Deseja Realmente Trocar Senha do Usuário:"}),e.jsxs(v,{color:"text.secondary",variant:"body1",fontWeight:"bold",children:[h==null?void 0:h.ds_Nome,"  ",h==null?void 0:h.ds_Sobrenome," - ",h==null?void 0:h.ds_Email]})]}),e.jsxs(u,{direction:"row",spacing:2,sx:{justifyContent:"flex-end"},children:[e.jsx(j,{color:"secondary",variant:"outlined",onClick:x,children:"Cancel"}),e.jsx(j,{color:"error",variant:"outlined",onClick:f,startIcon:e.jsx(L,{}),children:"Trocar Senha"})]})]}),S=h=>e.jsxs(u,{spacing:3,width:"100%",children:[e.jsxs(u,{spacing:2,sx:{justifyContent:"center",alignItems:"center"},children:[e.jsx(v,{color:"text.secondary",variant:"h5",children:"Nova Senha:"}),e.jsx(u,{direction:"row",spacing:3,sx:{justifyContent:"center",alignItems:"center"},children:e.jsx(j,{"aria-label":"copy",color:"secondary",variant:"text",endIcon:e.jsx(ge,{}),onClick:_=>l(h),children:h})})]}),e.jsx(u,{direction:"row",spacing:2,sx:{justifyContent:"flex-end"},children:e.jsx(j,{color:"secondary",variant:"outlined",onClick:x,children:"Sair"})})]});return e.jsx($,{open:c,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",hideBackdrop:!0,children:e.jsx(V,{sx:ea,children:g||o.isPending?e.jsxs(u,{alignContent:"center",justifyContent:"center",justifyItems:"center",alignItems:"center",children:[e.jsx(me,{})," Carregando..."]}):n?e.jsx(v,{color:"text.secondary",variant:"body2",children:n.message}):e.jsx(I,{maxWidth:"sm",children:e.jsx(T,{sx:{border:"1px solid var(--mui-palette-divider)",boxShadow:"var(--mui-shadows-16)"},children:e.jsxs(u,{direction:"row",spacing:2,sx:{display:"flex",p:3},children:[e.jsx(k,{sx:{bgcolor:"var(--mui-palette-error-50)",color:"var(--mui-palette-error-main)",display:o.isSuccess?"none":""},children:e.jsx(L,{fontSize:"var(--Icon-fontSize)"})}),o.isSuccess?S(o.data):b(d)]})})})})})}const be=i.createContext(void 0),aa=({children:t})=>{const[a,r]=i.useState(null),c=i.useCallback(m=>{r(m)},[]),p=i.useCallback(()=>{r(null)},[]);return e.jsx(be.Provider,{value:{openPopupId:a,handleOpen:c,handleClose:p},children:t})},ra=()=>{const t=i.useContext(be);if(!t)throw new Error("usePopupContext must be used within a PopupProvider");return t};function sa(t){const{openPopupId:a,handleOpen:r,handleClose:c}=ra(),[p,m]=i.useState(null),d=a===t,g=i.useCallback(()=>r(t),[r,t]),n=i.useCallback(()=>c(),[c]);return{anchor:p,setAnchor:m,isOpen:d,open:g,close:n}}function na(){const t=Re(D),{customDataSource:a}=Yt(),[r,c]=i.useState(!0),[p,m]=i.useState("full"),d=[5,10,"all"];i.useCallback(()=>p==="compact",[p]),i.useCallback(n=>{c(n)},[]);const g=i.useRef(null);return e.jsxs(aa,{children:[e.jsx(qt,{row:t.usuario,usuario:t.novoUsuario}),e.jsxs(Ke,{dataSource:a,allowColumnReordering:!0,columnAutoWidth:!0,columnResizingMode:"nextColumn",height:"100%",remoteOperations:{paging:!0,filtering:!0,sorting:!0,grouping:!1},ref:g,children:[e.jsx(Ge,{visible:!0}),e.jsx(Qe,{visible:!0}),e.jsx(B,{defaultPageSize:5,defaultPageIndex:0}),e.jsx(B,{defaultPageSize:5}),e.jsx(Xe,{visible:!0,allowedPageSizes:d,displayMode:p,showPageSizeSelector:r}),e.jsx(Je,{columnRenderingMode:"virtual"}),e.jsx(y,{dataField:"nr_Usuario",caption:"N° Usuário",alignment:"center",allowFiltering:!1,width:50}),e.jsx(y,{dataField:"ds_Nome",caption:"Nome"}),e.jsx(y,{dataField:"ds_Sobrenome",caption:"Sobrenome"}),e.jsx(y,{dataField:"ds_Email",caption:"E-mail"}),e.jsx(y,{dataField:"nr_Celular",caption:"Celular",cellRender:n=>n.value.length==13?e.jsx(_e,{format:"+55 (##) #.####-####",value:n.value.length==13?n.value.substring(2):void 0,allowEmptyFormatting:!0,displayType:"text"}):e.jsx(e.Fragment,{})}),e.jsx(y,{dataField:"tp_Status",caption:"Status",cellRender:n=>{let o=n.value?E[200]:P[200],x=n.value?E[50]:P[50];return e.jsx(z,{sx:{backgroundColor:`${o}90`,color:x},label:n.value?"Sim":"Não",size:"small",variant:"soft"})}}),e.jsx(y,{dataField:"tp_Admin",caption:"Admin",cellRender:n=>{let o=n.value?E[200]:P[200],x=n.value?E[50]:P[50];return e.jsx(z,{sx:{backgroundColor:`${o}90`,color:x},label:n.value?"Sim":"Não",size:"small",variant:"soft"})}}),e.jsx(y,{dataField:"dt_Inclusao",caption:"Data Inclusão",dataType:"datetime",format:"dd/MM/yyyy HH:mm"}),e.jsx(y,{dataField:"dt_Atualizacao",caption:"Data Atualização",dataType:"datetime",format:"dd/MM/yyyy HH:mm"}),e.jsx(y,{dataField:"js_Login",caption:"Ultimo Acesso",allowFiltering:!1,allowSorting:!1,cellRender:({data:n})=>{var x,f;const o=(f=(x=n.js_Login.map(l=>new Date(l)))==null?void 0:x.sort((l,b)=>new Date(b).getTime()-new Date(l).getTime()))==null?void 0:f.slice(0,1);if(F(o).isValid())return e.jsx(e.Fragment,{children:F(o).format("DD/MM/YYYY HH:mm:ss")})}}),e.jsx(y,{caption:"Ações",alignment:"center",fixed:!0,fixedPosition:"right",allowFixing:!0,allowFiltering:!1,allowSorting:!1,cellComponent:n=>{const[o,x]=i.useState(""),[f,l]=i.useState(""),[b,S]=i.useState(!1);return sa(n.data.key),e.jsxs(e.Fragment,{children:[e.jsx(Kt,{params:n.data,setModalRemover:x,setModalLogs:S,setModalTrocarSenha:l}),e.jsx(Qt,{idUsuario:o,setModalRemover:x,dataGrid:g}),e.jsx(Jt,{js_Login:n.data.row.data.js_Login,setModalLogs:S,modalLogs:b}),e.jsx(ta,{idUsuario:f,setModalTrocarSenha:l,dataGrid:g})]})}}),e.jsx(et,{})]})]})}const oa={title:`Usuários | Cadastro | Dashboard | ${ke.site.name}`};function pa(){return e.jsxs(s.Fragment,{children:[e.jsx($e,{children:e.jsx("title",{children:oa.title})}),e.jsx(V,{sx:{maxWidth:"var(--Content-maxWidth)",m:"var(--Content-margin)",p:"var(--Content-padding)",width:"var(--Content-width)"},children:e.jsxs(u,{spacing:4,children:[e.jsxs(u,{direction:{xs:"column",sm:"row"},spacing:4,sx:{alignItems:"flex-start"},children:[e.jsx(V,{sx:{flex:"1 1 auto"},children:e.jsx(v,{variant:"h4",children:"Gestão de Usuários"})}),e.jsx(V,{children:e.jsx(j,{component:le,href:ce.dashboard.cadastros.usuarios.criar,startIcon:e.jsx(Ie,{}),variant:"outlined",children:"Novo"})})]}),e.jsxs(Te,{children:[e.jsx(w,{}),e.jsx(V,{sx:{overflowX:"auto"},children:e.jsx(na,{})}),e.jsx(w,{})]})]})})]})}export{pa as Page};
